{
  "$schema": "http://json.schemastore.org/template",
  "author": "Rain Hu",
  "classifications": [
    "Web",
    "API",
    "Clean Architecture",
    "DDD",
    "CQRS"
  ],
  "identity": "Weda.Template",
  "name": "Weda Clean Architecture Template",
  "shortName": "weda",
  "description": "A clean architecture template with DDD, CQRS, NATS EventController, and Entity Framework Core.",
  "tags": {
    "language": "C#",
    "type": "solution"
  },
  "sourceName": "Weda.Template",
  "preferNameDirectory": true,
  "symbols": {
    "db": {
      "type": "parameter",
      "description": "Database provider to use.",
      "datatype": "choice",
      "choices": [
        {
          "choice": "sqlite",
          "description": "SQLite (default, lightweight)"
        },
        {
          "choice": "postgres",
          "description": "PostgreSQL"
        },
        {
          "choice": "mongo",
          "description": "MongoDB"
        },
        {
          "choice": "none",
          "description": "InMemory (no external database)"
        }
      ],
      "defaultValue": "sqlite"
    },
    "Nats": {
      "type": "parameter",
      "description": "The NATS service name.",
      "datatype": "string",
      "defaultValue": "weda-template",
      "replaces": "weda-template"
    },
    "test": {
      "type": "parameter",
      "description": "Include test projects.",
      "datatype": "bool",
      "defaultValue": "true"
    },
    "wiki": {
      "type": "parameter",
      "description": "Include wiki documentation and generator.",
      "datatype": "bool",
      "defaultValue": "true"
    },
    "sample": {
      "type": "parameter",
      "description": "Include the sample Employee module as reference.",
      "datatype": "bool",
      "defaultValue": "true"
    },
    "copyrightYear": {
      "type": "generated",
      "generator": "now",
      "parameters": {
        "format": "yyyy"
      },
      "replaces": "2026"
    },
    "sqlite": {
      "type": "computed",
      "value": "(db == \"sqlite\")"
    },
    "postgres": {
      "type": "computed",
      "value": "(db == \"postgres\")"
    },
    "mongo": {
      "type": "computed",
      "value": "(db == \"mongo\")"
    },
    "nodb": {
      "type": "computed",
      "value": "(db == \"none\")"
    },
    "DatabaseProvider": {
      "type": "generated",
      "generator": "switch",
      "parameters": {
        "evaluator": "C++",
        "datatype": "string",
        "cases": [
          { "condition": "(db == 'sqlite')", "value": "Sqlite" },
          { "condition": "(db == 'postgres')", "value": "PostgreSql" },
          { "condition": "(db == 'mongo')", "value": "MongoDb" },
          { "condition": "(db == 'none')", "value": "InMemory" }
        ]
      },
      "replaces": "DATABASE_PROVIDER_PLACEHOLDER"
    },
    "DatabaseConnection": {
      "type": "generated",
      "generator": "switch",
      "parameters": {
        "evaluator": "C++",
        "datatype": "string",
        "cases": [
          { "condition": "(db == 'sqlite')", "value": "Data Source=Weda.Template.sqlite" },
          { "condition": "(db == 'postgres')", "value": "Host=localhost;Database=weda_template;Username=postgres;Password=postgres" },
          { "condition": "(db == 'mongo')", "value": "mongodb://localhost:27017" },
          { "condition": "(db == 'none')", "value": "" }
        ]
      },
      "replaces": "DATABASE_CONNECTION_PLACEHOLDER"
    },
    "SampleSymbol": {
      "type": "generated",
      "generator": "switch",
      "parameters": {
        "evaluator": "C++",
        "datatype": "string",
        "cases": [
          { "condition": "(sample)", "value": ";sample" },
          { "condition": "(!sample)", "value": "" }
        ]
      }
    },
    "DbSymbol": {
      "type": "generated",
      "generator": "switch",
      "parameters": {
        "evaluator": "C++",
        "datatype": "string",
        "cases": [
          { "condition": "(db == 'sqlite')", "value": ";sqlite" },
          { "condition": "(db == 'postgres')", "value": ";postgres" },
          { "condition": "(db == 'mongo')", "value": ";mongo" },
          { "condition": "(db == 'none')", "value": ";nodb" }
        ]
      }
    },
    "DefineConstantsValue": {
      "type": "generated",
      "generator": "join",
      "parameters": {
        "symbols": [
          { "type": "const", "value": "$(DefineConstants)" },
          { "type": "ref", "value": "SampleSymbol" },
          { "type": "ref", "value": "DbSymbol" }
        ],
        "separator": ""
      },
      "replaces": "$(DefineConstants);sample;sqlite"
    }
  },
  "specialCustomOperations": {
    "**/*.html": {
      "operations": [
        {
          "type": "conditional",
          "configuration": {
            "if": ["<!--#if"],
            "else": ["<!--#else"],
            "elseif": ["<!--#elseif"],
            "endif": ["<!--#endif"],
            "trim": true,
            "wholeLine": true
          }
        }
      ]
    },
    "**/docker-compose*.yml": {
      "operations": [
        {
          "type": "conditional",
          "configuration": {
            "if": ["#if"],
            "else": ["#else"],
            "elseif": ["#elseif"],
            "endif": ["#endif"],
            "trim": true,
            "wholeLine": true
          }
        }
      ]
    }
  },
  "sources": [
    {
      "modifiers": [
        {
          "condition": "(!test)",
          "exclude": [
            "tests/**/*"
          ]
        },
        {
          "condition": "(!wiki)",
          "exclude": [
            "tools/WikiGenerator/**/*",
            "docs/wiki/**/*",
            "src/Weda.Template.Api/wwwroot/wiki/**/*"
          ]
        },
        {
          "condition": "(!sample)",
          "exclude": [
            "src/Weda.Template.Api/Employees/**/*",
            "src/Weda.Template.Domain/Employees/**/*",
            "src/Weda.Template.Application/Employees/**/*",
            "src/Weda.Template.Contracts/Employees/**/*",
            "src/Weda.Template.Infrastructure/Employees/**/*",
            "src/Weda.Template.Api/wwwroot/sample/**/*"
          ]
        },
        {
          "condition": "(db == 'sqlite')",
          "exclude": [
            "docker-compose.postgres.yml",
            "docker-compose.mongo.yml",
            "docker-compose.inmemory.yml"
          ]
        },
        {
          "condition": "(db == 'postgres')",
          "exclude": [
            "docker-compose.yml",
            "docker-compose.mongo.yml",
            "docker-compose.inmemory.yml"
          ],
          "rename": {
            "docker-compose.postgres.yml": "docker-compose.yml"
          }
        },
        {
          "condition": "(db == 'mongo')",
          "exclude": [
            "docker-compose.yml",
            "docker-compose.postgres.yml",
            "docker-compose.inmemory.yml"
          ],
          "rename": {
            "docker-compose.mongo.yml": "docker-compose.yml"
          }
        },
        {
          "condition": "(db == 'none')",
          "exclude": [
            "docker-compose.yml",
            "docker-compose.postgres.yml",
            "docker-compose.mongo.yml"
          ],
          "rename": {
            "docker-compose.inmemory.yml": "docker-compose.yml"
          }
        },
        {
          "exclude": [
            ".git/**/*",
            ".claude/**/*",
            ".vscode/**/*",
            "**/*.sqlite",
            "**/*.sqlite-shm",
            "**/*.sqlite-wal",
            "**/bin/**/*",
            "**/obj/**/*",
            "**/.DS_Store"
          ]
        }
      ]
    }
  ],
  "postActions": []
}
